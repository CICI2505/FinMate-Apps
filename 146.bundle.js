/*! For license information please see 146.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkapp_starter_project_with_webpack=self.webpackChunkapp_starter_project_with_webpack||[]).push([[146],{146:(n,t,e)=>{e.r(t),e.d(t,{default:()=>g});var r=e(481),o=e.n(r),i=e(569);function a(n){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},a(n)}function s(){s=function(){return t};var n,t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(n,t,e){n[t]=e.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(n,t,e){return Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),n[t]}try{d({},"")}catch(n){d=function(n,t,e){return n[t]=e}}function p(n,t,e,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new R(r||[]);return o(a,"_invoke",{value:O(n,e,s)}),a}function h(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=p;var f="suspendedStart",m="suspendedYield",g="executing",v="completed",b={};function y(){}function w(){}function x(){}var k={};d(k,c,(function(){return this}));var E=Object.getPrototypeOf,L=E&&E(E(B([])));L&&L!==e&&r.call(L,c)&&(k=L);var _=x.prototype=y.prototype=Object.create(k);function T(n){["next","throw","return"].forEach((function(t){d(n,t,(function(n){return this._invoke(t,n)}))}))}function z(n,t){function e(o,i,s,c){var l=h(n[o],n,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==a(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(n){e("next",n,s,c)}),(function(n){e("throw",n,s,c)})):t.resolve(d).then((function(n){u.value=n,s(u)}),(function(n){return e("throw",n,s,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(n,r){function o(){return new t((function(t,o){e(n,r,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,e,r){var o=f;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:n,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=j(s,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=g;var l=h(t,e,r);if("normal"===l.type){if(o=r.done?v:m,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function j(t,e){var r=e.method,o=t.iterator[r];if(o===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=n,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=h(o,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,b;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,b):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,b)}function S(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function M(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function R(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(S,this),this.reset(!0)}function B(t){if(t||""===t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(r.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}throw new TypeError(a(t)+" is not iterable")}return w.prototype=x,o(_,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,u,"GeneratorFunction"),t.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,x):(n.__proto__=x,d(n,u,"GeneratorFunction")),n.prototype=Object.create(_),n},t.awrap=function(n){return{__await:n}},T(z.prototype),d(z.prototype,l,(function(){return this})),t.AsyncIterator=z,t.async=function(n,e,r,o,i){void 0===i&&(i=Promise);var a=new z(p(n,e,r,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},T(_),d(_,u,"Generator"),d(_,c,(function(){return this})),d(_,"toString",(function(){return"[object Generator]"})),t.keys=function(n){var t=Object(n),e=[];for(var r in t)e.push(r);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=B,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(r,o){return s.type="throw",s.arg=t,e.next=r,o&&(e.method="next",e.arg=n),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(n,t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),b},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),M(e),b}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===n){var r=e.completion;if("throw"===r.type){var o=r.arg;M(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:B(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),b}},t}function c(n,t,e,r,o,i,a){try{var s=n[i](a),c=s.value}catch(n){return void e(n)}s.done?t(c):Promise.resolve(c).then(r,o)}function l(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(n){c(i,r,o,a,s,"next",n)}function s(n){c(i,r,o,a,s,"throw",n)}a(void 0)}))}}function u(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,d(r.key),r)}}function d(n){var t=function(n){if("object"!=a(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var e=t.call(n,"string");if("object"!=a(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==a(t)?t:t+""}function p(n){var t="function"==typeof Map?new Map:void 0;return p=function(n){if(null===n||!function(n){try{return-1!==Function.toString.call(n).indexOf("[native code]")}catch(t){return"function"==typeof n}}(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,e)}function e(){return function(n,t,e){if(h())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(n.bind.apply(n,r));return e&&f(o,e.prototype),o}(n,arguments,m(this).constructor)}return e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),f(e,n)},p(n)}function h(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(n){}return(h=function(){return!!n})()}function f(n,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},f(n,t)}function m(n){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},m(n)}delete o().Icon.Default.prototype._getIconUrl,o().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});var g=function(n){function t(){var n;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(n,t,e){return t=m(t),function(n,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,h()?Reflect.construct(t,e||[],m(n).constructor):t.apply(n,e))}(this,t)).attachShadow({mode:"open"}),n.classList.add("home-page"),n.maps={},n.resizeObservers={},n._initTemplate(),n}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&f(n,t)}(t,n),r=t,c=[{key:"_initTemplate",value:function(){this.shadowRoot.innerHTML='\n      <style>\n        :host {\n          display: block;\n          height: 100vh;\n          background-color:rgb(244, 245, 245);\n          color: #eeeeee;\n          font-family: \'Poppins\', sans-serif;\n          overflow-x: hidden;\n        }\n\n        .page-container {\n          display: flex;\n          flex-direction: column;\n          height: 100vh;\n          max-width: 100vw;\n          overflow: hidden;\n        }\n        \n        .navbar {\n          background-color:rgb(48, 91, 4);\n          padding: 1rem;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          box-shadow: 0 2px 10px rgba(42, 220, 57, 0.2);\n          position: sticky;\n          top: 0;\n          z-index: 100;\n          flex-shrink: 0;\n        }\n\n        .scrollable-content {\n          flex: 1;\n          overflow-y: auto;\n          padding: 2rem 0;\n          -webkit-overflow-scrolling: touch;\n          min-height: 0;\n          width: 100%;\n          box-sizing: border-box;\n        }\n        \n        .content {\n          max-width: 1200px;\n          width: 100%;\n          margin: 0 auto;\n          padding: 0 2rem;\n          box-sizing: border-box;\n        }\n        \n        .logo {\n          font-size: 1.5rem;\n          font-weight: 700;\n          color:rgb(222, 233, 215);\n          text-decoration: none;\n        }\n        \n        .nav-links {\n          display: flex;\n          gap: 1.5rem;\n          align-items: center;\n        }\n        \n        .nav-link {\n          color:rgb(238, 238, 238);\n          text-decoration: none;\n          font-weight: 500;\n          transition: color 0.2s ease;\n        }\n        \n        .nav-link:hover {\n          color:rgb(63, 218, 15);\n        }\n        \n        .logout-btn {\n          background: linear-gradient(135deg,rgb(57, 74, 99) 0%,rgb(194, 219, 173) 100%);\n          color: white;\n          border: none;\n          padding: 0.5rem 1rem;\n          border-radius: 6px;\n          cursor: pointer;\n          font-weight: 500;\n          transition: all 0.3s ease;\n        }\n        \n        .logout-btn:hover {\n          background: linear-gradient(135deg,rgb(174, 207, 147) 0%,rgb(134, 180, 96) 100%);\n          transform: translateY(-2px);\n          box-shadow: 0 4px 8px #BDCDD6;\n        }\n\n        .logout-btn:active {\n          transform: scale(0.95) translateY(-2px);\n          transition: transform 0.1s ease;\n        }\n\n        .logout-btn.clicked {\n          animation: pulse 0.5s ease;\n        }\n\n        .welcome-message {\n          text-align: center;\n          margin-bottom: 2rem;\n          font-size: 1.8rem;\n          color:rgb(168, 207, 147);\n        }\n        \n        .stories-container {\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n          gap: 2rem;\n          margin-top: 2rem;\n        }\n        \n        .story-card {\n          background-color:rgb(48, 91, 4);\n          border-radius: 8px;\n          overflow: hidden;\n          box-shadow: 0 4px 8px rgba(190, 178, 178, 0.2);\n          transition: transform 0.3s ease;\n        }\n        \n        .story-card:hover {\n          transform: translateY(-5px);\n        }\n        \n        .story-image {\n          width: 100%;\n          height: 200px;\n          object-fit: cover;\n        }\n        \n        .story-content {\n          padding: 1rem;\n        }\n        \n        .story-title {\n          font-size: 1.2rem;\n          margin-bottom: 0.5rem;\n          color:rgb(177, 207, 147);\n        }\n        \n        .story-description {\n          color: rgb(238, 238, 238);\n          margin-bottom: 0.5rem;\n          display: -webkit-box;\n          -webkit-line-clamp: 3;\n          -webkit-box-orient: vertical;\n          overflow: hidden;\n        }\n        \n        .story-date {\n          color: rgb(156, 163, 175);\n          font-size: 0.8rem;\n        }\n        \n        .story-map {\n          position: relative;\n          z-index: 0;\n          height: 200px;\n          width: 100%;\n          min-height: 200px;\n          margin-top: 1rem;\n          border-radius: 8px;\n          overflow: hidden;\n          background: #dddddd;\n        }\n        \n        .map-container {\n          height: 100%;\n          width: 100%;\n          position: relative;\n        }\n\n        .main-map-container {\n          height: 400px;\n          width: 100%;\n          margin-bottom: 2rem;\n          border-radius: 8px;\n          overflow: hidden;\n        }\n\n        .main-map-container .map-container {\n          height: 100%;\n          width: 100%;\n        }\n        \n        .leaflet-container {\n          background: #dddddd !important;\n          height: 100% !important;\n          width: 100% !important;\n        }\n        \n        .leaflet-tile {\n          position: absolute;\n          left: 0;\n          top: 0;\n          filter: none !important;\n          -webkit-filter: none !important;\n          image-rendering: crisp-edges;\n        }\n        \n        .leaflet-popup-content-wrapper {\n          border-radius: 8px !important;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.2) !important;\n          background:rgb(50, 77, 39) !important;\n          color: #eeeeee !important;\n        }\n        \n        .leaflet-popup-content {\n          margin: 8px !important;\n          font-size: 14px !important;\n          line-height: 1.4 !important;\n        }\n        \n        .leaflet-popup-tip {\n          background:rgb(52, 77, 39) !important;\n        }\n        \n        .leaflet-marker-icon {\n          filter: hue-rotate(180deg) brightness(1.2);\n        }\n        \n        .loading {\n          text-align: center;\n          padding: 2rem;\n          color:rgb(176, 207, 147);\n        }\n        \n        .error-message {\n          text-align: center;\n          padding: 2rem;\n          color: #ff6b6b;\n        }\n\n        @keyframes pulse {\n          0% {\n            transform: scale(1);\n            box-shadow: 0 0 0 0 rgba(149, 207, 147, 0.7);\n          }\n          70% {\n            transform: scale(1.05);\n            box-shadow: 0 0 0 10px rgba(147, 191, 207, 0);\n          }\n          100% {\n            transform: scale(1);\n            box-shadow: 0 0 0 0 rgba(148, 207, 147, 0);\n          }\n        }\n\n        .skip-link-container {\n          position: relative;\n          width: 100%;\n          height: 0;\n        }\n\n        .skip-link {\n          display: none;\n          width: 100%;\n          background-color:rgb(160, 207, 147);\n          color:rgb(39, 77, 42);\n          text-align: center;\n          padding: 12px 40px 12px 16px;\n          font-weight: 500;\n          text-decoration: none;\n          position: absolute;\n          left: 0;\n          top: 0;\n          z-index: 9999;\n          line-height: 1.5;\n        }\n\n        .skip-link:focus {\n          display: block;\n          opacity: 1;\n          pointer-events: auto;\n          transform: translateY(0);\n          outline: 2px solid #eeeeee;\n          outline-offset: -2px;\n        }\n\n        .skip-close-btn {\n          position: absolute;\n          right: 8px;\n          top: 70%;\n          transform: translateY(-50%);\n          background: none;\n          border: none;\n          color:rgb(55, 77, 39);\n          font-size: 1.25rem;\n          font-weight: bold;\n          cursor: pointer;\n          padding: 0 5px;\n          z-index: 10000;\n          opacity: 0;\n          pointer-events: none;\n        }\n\n        .notification-controls {\n          display: flex;\n          gap: 0.5rem;\n          align-items: center;\n        }\n\n        .notification-btn {\n          background: linear-gradient(135deg,rgb(91, 165, 74) 0%, #166088 100%);\n          color: white;\n          border: none;\n          padding: 0.5rem 1rem;\n          border-radius: 6px;\n          cursor: pointer;\n          font-weight: 500;\n          transition: all 0.3s ease;\n          font-size: 0.9rem;\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n        }\n\n        .notification-btn:hover {\n          background: linear-gradient(135deg,rgb(22, 136, 22) 0%,rgb(89, 165, 74) 100%);\n        }\n\n        .notification-btn svg {\n          width: 16px;\n          height: 16px;\n          fill: currentColor;\n        }\n      \n        @media (max-width: 1024px) {\n          .content {\n            padding: 0 1.5rem;\n            max-width: calc(100vw - 3rem);\n          }\n          \n          .stories-container {\n            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n            gap: 1.5rem;\n          }\n          \n          .story-image {\n            height: 180px;\n          }\n          \n          .story-map {\n            height: 180px;\n          }\n          \n          .welcome-message {\n            font-size: 1.6rem;\n          }\n        }\n\n        @media (max-width: 768px) {\n          .navbar {\n            padding: 1rem;\n            flex-direction: column;\n            gap: 1rem;\n          }\n\n          .nav-links {\n            width: 100%;\n            justify-content: space-around;\n          }\n\n          .stories-container {\n            grid-template-columns: 1fr;\n          }\n          \n          .content {\n            padding: 0 1rem;\n          }\n          \n          .welcome-message {\n            font-size: 1.5rem;\n            margin-bottom: 1.5rem;\n          }\n          \n          .story-card {\n            max-width: 100%;\n          }\n          \n          .story-image {\n            height: 220px;\n          }\n          \n          .story-map {\n            height: 220px;\n          }\n        }\n\n        @media (max-width: 685px) {\n          .page-container {\n            height: auto;\n            min-height: 100vh;\n          }\n          \n          .scrollable-content {\n            padding: 1.5rem 0;\n          }\n          \n          .welcome-message {\n            font-size: 1.4rem;\n            margin-bottom: 1rem;\n          }\n          \n          .story-content {\n            padding: 0.8rem;\n          }\n          \n          .story-title {\n            font-size: 1.1rem;\n          }\n          \n          .story-description {\n            -webkit-line-clamp: 2;\n            font-size: 0.9rem;\n          }\n          \n          .logout-btn {\n            padding: 0.4rem 0.8rem;\n            font-size: 0.9rem;\n          }\n          \n          .nav-link {\n            font-size: 0.9rem;\n          }\n          \n          .logo {\n            font-size: 1.3rem;\n          }\n        }\n      </style>\n      <div class="page-container">\n        <nav class="navbar">\n        \n          <a href="#/home" class="logo">FinMate Apps</a>\n          <div class="nav-links">\n            <a href="#/home" class="nav-link">Home</a>\n            <a href="#/create" class="nav-link">Create</a>\n            \n            \n            <button class="logout-btn">Logout</button>\n          </div>\n\n          \n        </nav>\n        <div class="skip-link-container">\n            <a href="#storiesContainer" class="skip-link" id="skipLink">Skip to Content</a>\n            <button class="skip-close-btn" id="skipCloseBtn" aria-label="Close skip link">×</button>\n        </div>\n        <div class="scrollable-content">\n          <div class="main-map-container">\n            <div class="map-container" id="mainMap"></div>\n          </div>\n          <div class="content">\n            <h1 class="welcome-message">Welcome to Story FinMate Apps!</h1>\n            <div id="storiesContainer"></div>\n          </div>\n        </div>\n      </div>\n    '}},{key:"connectedCallback",value:(p=l(s().mark((function n(){var t,r,o,i,a,c,u,d,p,h,f,m=this;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return document.startViewTransition&&(document.documentElement.style.viewTransitionName="home-page",this.style.contain="layout paint"),this.shadowRoot.querySelector('a[href="#/create"]').addEventListener("click",function(){var n=l(s().mark((function n(t){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),!document.startViewTransition){n.next=8;break}return document.documentElement.classList.add("create-transition"),n.next=5,document.startViewTransition((function(){window.location.hash="#/create"})).finished;case 5:document.documentElement.classList.remove("create-transition"),n.next=9;break;case 8:window.location.hash="#/create";case 9:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()),this.shadowRoot.querySelector(".logout-btn").addEventListener("click",(function(n){n.target.animate([{transform:"scale(1)",boxShadow:"0 4px 8px rgba(147, 191, 207, 0)"},{transform:"scale(1.05)",boxShadow:"0 4px 15px rgba(147, 191, 207, 0.4)"},{transform:"scale(1)",boxShadow:"0 4px 8px rgba(147, 191, 207, 0)"}],{duration:500,easing:"ease-out"}),m._handleLogout()})),t=function(){var n=l(s().mark((function n(){var t,r,o,i,a;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.e(112).then(e.bind(e,112));case 3:return t=n.sent,r=t.isCurrentPushSubscriptionAvailable,n.next=7,r();case 7:o=n.sent,i=m.shadowRoot.getElementById("subscribeBtn"),a=m.shadowRoot.getElementById("unsubscribeBtn"),i&&a&&(i.style.display=o?"none":"block",a.style.display=o?"block":"none"),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),console.error("Error updating subscription buttons:",n.t0);case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(){return n.apply(this,arguments)}}(),r=this.shadowRoot.getElementById("subscribeBtn"),o=this.shadowRoot.getElementById("unsubscribeBtn"),null==r||r.addEventListener("click",l(s().mark((function n(){var r,o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.e(112).then(e.bind(e,112));case 3:return r=n.sent,o=r.subscribe,n.next=7,o();case 7:return n.next=9,t();case 9:alert("Berhasil subscribe notifikasi"),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),console.error("Subscription error:",n.t0),alert("Gagal subscribe: ".concat(n.t0.message));case 16:case"end":return n.stop()}}),n,null,[[0,12]])})))),null==o||o.addEventListener("click",l(s().mark((function n(){var r,o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.e(112).then(e.bind(e,112));case 3:return r=n.sent,o=r.unsubscribe,n.next=7,o();case 7:return n.next=9,t();case 9:alert("Berhasil unsubscribe notifikasi"),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),console.error("Unsubscription error:",n.t0),alert("Gagal unsubscribe: ".concat(n.t0.message));case 16:case"end":return n.stop()}}),n,null,[[0,12]])})))),n.next=10,t();case 10:i=this.shadowRoot.getElementById("skipLink"),a=this.shadowRoot.getElementById("skipCloseBtn"),c=this.shadowRoot.getElementById("storiesContainer"),u=function(){i.style.display="block",a.style.display="block",i.focus()},d=function(){i.style.display="none",a.style.display="none"},document.addEventListener("keydown",(function(n){"Tab"===n.key&&"block"!==i.style.display&&(u(),n.preventDefault())})),p=function(n){n&&n.preventDefault(),c.tabIndex=-1,c.focus(),d(),setTimeout((function(){c.removeAttribute("tabIndex")}),1e3)},h=function(){d(),m.shadowRoot.querySelector(".navbar").focus()},i.addEventListener("click",p),i.addEventListener("keydown",(function(n){"Enter"!==n.key&&" "!==n.key||p(n)})),a.addEventListener("click",h),a.addEventListener("keydown",(function(n){"Enter"!==n.key&&" "!==n.key||(n.preventDefault(),h())})),f=function(){var n=m.shadowRoot.getElementById("skipLink"),t=m.shadowRoot.getElementById("skipCloseBtn");if(n&&t){var e=n.offsetHeight,r=window.innerWidth<768?22:24;t.style.top="".concat(e/2,"px"),t.style.height="".concat(r,"px"),t.style.width="".concat(r,"px")}},setTimeout((function(){f(),window.addEventListener("resize",f),i.focus(),i.addEventListener("blur",(function(){setTimeout((function(){m.shadowRoot.activeElement&&m.shadowRoot.activeElement!==m.shadowRoot||i.focus()}),10)}))}),100),this.shadowRoot.addEventListener("keydown",(function(n){"Escape"===n.key&&"none"!==i.style.display&&h()})),this._loadStories();case 26:case"end":return n.stop()}}),n,this)}))),function(){return p.apply(this,arguments)})},{key:"_loadStories",value:(d=l(s().mark((function n(){var t,e,r,o,i;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=this.shadowRoot.getElementById("storiesContainer"),e=localStorage.getItem("accessToken"),t.innerHTML='<div class="loading">Loading stories...</div>',e){n.next=7;break}return this.showError("Silakan login terlebih dahulu"),window.location.hash="#/",n.abrupt("return");case 7:return n.prev=7,n.next=10,fetch("https://story-api.dicoding.dev/v1/stories?location=1",{headers:{Authorization:"Bearer ".concat(e)}});case 10:if(r=n.sent,(o=r.headers.get("content-type"))&&o.includes("application/json")){n.next=14;break}throw new Error("Response bukan JSON");case 14:return n.next=16,r.json();case 16:if(i=n.sent,r.ok&&!i.error){n.next=22;break}if(401!==r.status){n.next=21;break}return this._handleLogout(),n.abrupt("return");case 21:throw new Error(i.message||"Gagal memuat cerita");case 22:this._displayStories(i.listStory),n.next=29;break;case 25:n.prev=25,n.t0=n.catch(7),console.error("Error:",n.t0),this.showError(n.t0.message.includes("JSON")?"Terjadi kesalahan server":n.t0.message);case 29:case"end":return n.stop()}}),n,this,[[7,25]])}))),function(){return d.apply(this,arguments)})},{key:"_displayStories",value:function(n){var t=this,e=this.shadowRoot.getElementById("storiesContainer");if(n&&0!==n.length){e.innerHTML='<div class="stories-container"></div>';var r=e.querySelector(".stories-container");n.forEach((function(n,e){var o=document.createElement("div");o.className="story-card",o.setAttribute("data-story-id",n.id),o.style.cursor="pointer",o.addEventListener("click",(function(){window.location.hash="#/detail/".concat(n.id)})),o.animate([{opacity:0,transform:"translateY(20px)"},{opacity:1,transform:"translateY(0)"}],{duration:400,delay:50*e,easing:"ease-out",fill:"backwards"});var i=n.lat&&n.lon?'\n      <div class="story-map">\n        <div class="map-container" id="map-container-'.concat(n.id,'"></div>\n      </div>\n    '):"";o.innerHTML='\n      <img src="'.concat(n.photoUrl,'" alt="').concat(n.name,'" class="story-image" loading="lazy">\n      <div class="story-content">\n        <h3 class="story-title">').concat(n.name,'</h3>\n        <p class="story-description">').concat(n.description,'</p>\n        <p class="story-date">').concat(new Date(n.createdAt).toLocaleDateString(),"</p>\n        ").concat(i,"\n      </div>\n    "),r.appendChild(o),n.lat&&n.lon&&requestAnimationFrame((function(){t._initMap(n.id,n.lat,n.lon,n.name)}))}))}else e.innerHTML='<div class="error-message">No stories found</div>'}},{key:"_initMap",value:function(n,t,e,r){var i=this,a=this.shadowRoot.getElementById("map-container-".concat(n));if(a){var s=a.animate([{opacity:.5,backgroundColor:"#dddddd"},{opacity:1,backgroundColor:"#eeeeee"}],{duration:1e3,iterations:1/0,direction:"alternate"});this.maps[n]&&(this.maps[n].remove(),delete this.maps[n]),this.resizeObservers[n]&&(this.resizeObservers[n].disconnect(),delete this.resizeObservers[n]),a.innerHTML="";try{var c=o().map(a,{preferCanvas:!0,zoomControl:!1,dragging:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,keyboard:!1,touchZoom:!1,zoomSnap:.1}).setView([t,e],15);this.maps[n]=c,o().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:18,minZoom:13,crossOrigin:!0}).addTo(c);var l=o().marker([t,e]).addTo(c),u="\n        <div style=\"font-family: 'Poppins', sans-serif; padding: 8px; max-width: 200px;\">\n          <strong>".concat(r,"</strong><br>\n          <small>Lat: ").concat(t.toFixed(4),"</small><br>\n          <small>Lng: ").concat(e.toFixed(4),"</small>\n        </div>\n      ");l.bindPopup(u,{closeButton:!1,autoClose:!1,closeOnClick:!1,className:"custom-popup"}).openPopup();var d=new ResizeObserver((function(){i.resizeTimeouts&&i.resizeTimeouts[n]&&clearTimeout(i.resizeTimeouts[n]),i.resizeTimeouts=i.resizeTimeouts||{},i.resizeTimeouts[n]=setTimeout((function(){c.invalidateSize({pan:!1})}),100)}));d.observe(a),this.resizeObservers[n]=d,setTimeout((function(){c.invalidateSize({pan:!1})}),300),c.whenReady((function(){s.cancel()}))}catch(n){console.error("Map initialization error:",n),s.cancel(),a.innerHTML='\n        <div style="\n          height: 100%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: #eee;\n          color: #333;\n          font-family: sans-serif;\n          text-align: center;\n          padding: 1rem;\n        ">\n          <div>\n            <p>Map unavailable</p>\n            <small>Location: '.concat(t.toFixed(4),", ").concat(e.toFixed(4),"</small>\n          </div>\n        </div>\n      ")}}}},{key:"_initMainMap",value:function(n){var t=this,e=this.shadowRoot.getElementById("mainMap");e&&(this._mainMap&&this._mainMap.remove(),this._mainMap=o().map(e).setView([-2.5489,118.0149],5),o().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(this._mainMap),n.filter((function(n){return n.lat&&n.lon})).forEach((function(n){o().marker([n.lat,n.lon]).addTo(t._mainMap).bindPopup("<b>".concat(n.name,"</b><br>").concat(n.description.substring(0,50),"..."))})),this._mainMapResizeObserver=new ResizeObserver((function(){setTimeout((function(){return t._mainMap.invalidateSize()}),100)})),this._mainMapResizeObserver.observe(e))}},{key:"_handleLogout",value:function(){if(!document.startViewTransition)return(0,i.ri)(),void(window.location.hash="#/");document.documentElement.classList.add("logout-transition"),document.startViewTransition(l(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,i.ri)();case 2:window.location.hash="#/";case 3:case"end":return n.stop()}}),n)})))).finished.then((function(){document.documentElement.classList.remove("logout-transition")}))}},{key:"setNavigateHandler",value:function(n){this._navigateTo=n}},{key:"initMainMap",value:function(n){this._initMainMap(n)}},{key:"handleLogout",value:function(){this._handleLogout()}},{key:"showError",value:function(n){this.shadowRoot.getElementById("storiesContainer").innerHTML='<div class="error-message">'.concat(n,"</div>")}},{key:"displayStories",value:function(n){this._displayStories(n)}},{key:"disconnectedCallback",value:function(){document.startViewTransition&&(document.documentElement.style.viewTransitionName="home-page",this.style.contain="layout paint"),Object.values(this.maps).forEach((function(n){n.remove()})),this.maps={},Object.values(this.resizeObservers).forEach((function(n){n.disconnect()})),this.resizeObservers={},this.resizeTimeouts&&(Object.values(this.resizeTimeouts).forEach((function(n){clearTimeout(n)})),this.resizeTimeouts={})}}],c&&u(r.prototype,c),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,c,d,p}(p(HTMLElement))}}]);